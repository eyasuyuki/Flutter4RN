# 1

- Flutterはなぜ楽しいのか、というテーマで発表します。
- 遠藤と申します。
- 今年の3月から無職になりまして休職中です。
- Android開発を2009年から行っていまして2016年に某大学の公式iOS/Androidアプリを開発しました。
- Flutterを始めたのは今年の3月からです。
- React Nativeはこの勉強会があるので4月から始めました。
- React Native経験は約2週間です。

# 2

- Flutter と Dart の公式 Web サイトはこちらです。
- 日本の Flutter ユーザーグループと Dart の Slack ワークスペースです。

# 3

- 今回 React NativeとFlutterの比較のためにYouTubeを一覧表示するサンプルプログラムを用意しました。
- React NativeバージョンはBarry Michael Doyleさんのチュートリアルそのままです。
- FlutterバージョンはDartのコードサイズが5K以内という条件で募集したFlutterCreateというコンテストに応募したもので最小限の機能になっています。

# 4

- さて本題です。Flutterはなぜ楽しいのでしょうか。
- まず初心者にとって嬉しいのが環境構築がとても楽だということです。
- 次にDartの言語仕様がシンプルであること、
- そして何と言ってもホットリロードが非常に高速であることです。
- 4つめはUI構築がシンプルであること。全てがWidgetです。
- 5つめは高い生産性とエコシステムです。

# 5

- Flutterのインストールはとても簡単です。
- まず公式サイトからSDKをダウンロードして展開します。
- 展開したSDKのbinディレクトリをPATHに追加してflutterコマンドが使えるようにします。
- 開発環境がどこまで進んだかをチェックするためにflutter doctorコマンドを使います。
- flutter docktorコマンドでチェックすると、Android StudioやVisual Studio Code用のプラグインがなければインストール方法を教えてくれます。
- エミュレーターが起動しているかまたは実機が接続されているかもflutter doctorでチェックできます。
- 開発環境が整ったらflutter createコマンドでプロジェクトを作成します。
- flutter upgradeコマンドを使うと最新版にアップグレードできます。
- 少し補足します。
- Macの方はhomebrewを使う方も多いと思うんですが、homebrewだとバージョンが古いので公式からバイナリをダウンロードするのがおすすめです。
- Flutte SDKにDartの処理系も含まれています。
- 現時点での最新バージョンはFlutter 1.2.1、Dart 2.1.2 です。

# 6

- Dartの言語仕様はとてもシンプルです。
- 一言で言えば「闇が深くない」ということです。
- プログラマーが意外に思う仕様や予想外の挙動が少ないです。
- Dartでは全てがオブジェクトです。
- Dartはクラスベースのオブジェクト指向言語です。
- Dartは強い型付けのプログラミング言語です。型推論も行えます。
- Dart では Java と同じようにthis キーワードは常に現在のインスタンスを指します。
- リストに対して map, filter, fold といった高階関数が使えます。
- Dart2では=記号3つの厳密な等価演算子はサポートされていません。その代わりidenticalという関数が使えます。
- Dartの等価演算子は適切に動作します。

# 7

- これは Twitter で見て思わず保存した画像ですがDart だと全て false になります。

# 8

- Flutterのホットリロードはとても高速です。
- デモでお見せしましょう。
- これはFlutterバージョンの簡単なYouTubeプレーヤーのサンプルです。
- 画面のリスト要素のsubtitleをコメントアウトして保存してみます。
- 即座に変更が反映されリスト要素がアイコンとタイトルだけになります。
- コメントを解除して保存しても即座に反映されます。
- FlutterのUIは全てコードで書くのですが、ホットリロードが高速なのでストレスなく開発することができます。

# 9

- FlutterのUI構築はソースコードで行います。
- 全てがWidghetです。
- Widgetには状態を持たないStatelessWidgetと状態を持つStatefulWidgetがあります。
- FlutterではXMLでレイアウトを記述したりストーリーボードでUIを定義したりする必要はありません。というかできません。
- 先ほどデモした通りホットリロードが高速なのでソースコード編集でUIを開発してもストレスがありません。
- マテリアルデザインのWidgetやiOSのガイドラインに沿ったWidgetが用意されています。
- 例えばiOSアプリもマテリアルデザインで統一したい場合、Flutterは最強なのではないかと思っています。

# 10

- 生産性の面ではAndroid Studioのデバッガーが使えるのがとても便利です。
- IntelliJを使ったことがある方は分かると思うのですがブレークポイントを置いて実行を停止して変数の値を調べたりステップ実行したり効率的にデバッグすることができます。
- Widgetの入れ子が深くなったときなど、エディターのDartプラグインで閉じ括弧の位置にコメントが自動的に表示されるのも便利です。
- インストールで説明したflutter doctorやflutter create、ライブラリを取得するflutter pagkages getなど便利なCLIコマンドが使えますが、地味に便利なのがソースコードを整形するdartfmtです。
- Goのgofmtと同じように複数の開発者がいる場合にコードスタイルを統一することができます。
- エディターのFlutterプラグインではファル保存時にdartfmtでコード整形することができます。

# 11

- Dartの非同期処理ではFuture, async/awaitが使えるほか、Streamが標準でサポートされています。
- BLoCパターンはStreamを利用したイベントモデルです。複雑なWidgetツリーを効率的に再描画できます。
- FlutterはDartの豊富なライブラリを使うことができます。
- 例えばFirebase用のプラグインがあってFirebaseをすぐ利用できます。

# 12

- 最後に将来対応されるFlutterの機能をご紹介します。
- macOSとWindowsアプリケーション開発に対応するほか、Webアプリケーション開発もFlutterでできるようになる予定です。
- これはHummingbirdプロジェクトと呼ばれています。
- 他のWebアプリケーションフレームワークと違ってモバイルアプリと同じものをcanvasに描画します。
- 長くなりましたが Flutterは楽しいのでぜひお試しください。
- ありがとうございました。
